<head> 
    <title>LocalTunes</title> 
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
    <script src="map.js"></script>
    <script src="http://maps.google.com/maps/api/js?sensor=true&callback=initialize"></script>
    <meta charset="UTF-8">
    <script src="head.js"></script>

</head>
<body>
<div class="wrapper">


    <div data-role="page" id="home">

        <div data-role="header">
          <a href="#" class="showMenu">Menu</a>
          <a href="map.html?" data-transition="fade" data-icon = "grid">Map View</a>
            <h1>List View</h1>
        </div><!-- /header -->

        <div data-role="content">
                <div class="content-primary">
<!--     <ul data-role="listview">
      <li><a href="#musicDetail" data-transition="slide">
        <img src="images/album-bb.jpg" />
        <h3>Broken Bells</h3>
        <p>Broken Bells</p>
      </a></li>
      <li><a href="#musicDetail" data-transition="slide">
        <img src="images/album-hc.jpg" />
        <h3>Warning</h3>
        <p>Hot Chip</p>
      </a></li>
      <li><a href="#musicDetail" data-transition="slide">
        <img src="images/album-p.jpg" />
        <h3>Wolfgang Amadeus Phoenix</h3>
        <p>Phoenix</p>
      </a></li>
      <li><a href="#musicDetail" data-transition="slide">
        <img src="images/album-ok.jpg" />
        <h3>Of The Blue Colour Of The Sky</h3>
        <p>Ok Go</p>
      </a></li>
      <li><a href="#musicDetail" data-transition="slide">
        <img src="images/album-ws.jpg" />
        <h3>Elephant</h3>
        <p>The White Stripes</p>
      </a></li>
      <li><a href="#musicDetail" data-transition="slide">
        <img src="images/album-rh.jpg" />
        <h3>Kid A</h3>
        <p>Radiohead</p>
      </a></li>
      <li><a href="#musicDetail" data-transition="slide">
        <img src="images/album-xx.jpg" />
        <h3>XX</h3>
        <p>XX</p>
      </a></li>
      <li><a href="#musicDetail" data-transition="slide">
        <img src="images/album-mg.jpg" />
        <h3>Congratulations</h3>
        <p>MGMT</p>
      </a></li>
      <li><a href="#musicDetail" data-transition="slide">
        <img src="images/album-ag.jpg" />
        <h3>Ashes Grammar</h3>
        <p>A Sunny Day in Glasgow</p>
      </a></li>
      <li><a href="#musicDetail" data-transition="slide">
        <img src="images/album-k.jpg" />
        <h3>Hot Fuss</h3>
        <p>Killers</p>
      </a></li>
      <li><a href="#musicDetail" data-transition="slide">
        <img src="images/album-af.jpg" />
        <h3>The Suburbs</h3>
        <p>Arcade Fire</p>
      </a></li>
    </ul> -->
    <script type="text/javascript">
    $.getJSON('ajax/test.json', function(data) {
  var items = [];

  $.each(data, function(key, val) {
    items.push('<li id="' + key + '">' + val + '</li>');
  });

  $('<ul/>', {
    'class': 'my-new-list',
    html: items.join('')
  }).appendTo('body');
});
    </script>
    </div>

        </div><!-- /content -->

    </div><!-- /page -->


    <div data-role="page" id="Search">

        <div data-role="header">
          <a href="#" class="showMenu">Menu</a>
            <h1>Search</h1>
        </div><!-- /header -->

        <div data-role="content">
            <p>This is search content.</p>
        </div><!-- /content -->

    </div><!-- /page -->


    <div data-role="page" id="Setting">

        <div data-role="header">
          <a href="#" class="showMenu">Menu</a>
            <h1>Setting Page</h1>
        </div><!-- /header -->

        <div data-role="content">
            <p>This is Setting page content.</p>
        </div><!-- /content -->

    </div><!-- /page -->


    <div data-role="page" id="Favor">

        <div data-role="header">
          <a href="#" class="showMenu">Menu</a>
            <h1>Favor Page</h1>
        </div><!-- /header -->

        <div data-role="content">
            <p>This is Favor page content.</p>
        </div><!-- /content -->

    </div><!-- /page -->


    <div data-role="page" id="Event">

        <div data-role="header">
          <a href="#" class="showMenu">Menu</a>
            <h1>Event Page</h1>
        </div><!-- /header -->

        <div data-role="content">
            <p>This is Event page content.</p>
        </div><!-- /content -->

    </div><!-- /page -->



    <div data-role="page" id="musicDetail" data-add-back-btn="true">

        <div data-role="header">
            <h1>Music Detail</h1>
        </div><!-- /header -->

        <div data-role="content">
            <p>This is music detail content.</p>
        </div><!-- /content -->

    </div><!-- /page -->


    <div data-role="page" id="mapView">
      <link rel="stylesheet" href="map.css" />
        <div data-role="header">
          <a href="#" class="showMenu">Menu</a>
          <a href="#home " data-transition="fade" data-icon="grid" data-iconpos = "left">List View</a>
            <h1>Map View</h1>
        </div data-role="content">
        <div id="map-canvas">
          <!-- map loads here -->
        </div><!-- Ä± -->
        </div><!-- /content -->
            <script>
    head.js(
        "map.js",
        function() {
            head.js("http://maps.google.com/maps/api/js?sensor=true&callback=initialize");
        }
    );
    </script>
    </div><!-- /page -->



    <div data-role="page" id="page2">

        <div data-role="header">
          <a href="#" class="showMenu">Menu</a>
            <h1>Page 2</h1>
        </div><!-- /header -->

        <div data-role="content">
            <p>This is page 2 content.</p>
            <ul data-role="listview" data-inset="true">
                <li>Item 1</li>
                <li>Item 2</li>
            </ul>
        </div><!-- /content -->

    </div><!-- /page -->


<!-- Menu panel -->
    <div data-role="page" id="menu" data-theme="a">


        <div data-role="content">
            <ul data-role="listview">
                <li><a href="#home" class="menubtn" data-transition="slide">Home</a></li>
                <li><a href="#Search" class="menubtn" data-transition="slide">Search</a></li>
                <li><a href="#Setting" class="menubtn" data-transition="slide">Setting</a></li>
                <li><a href="#Favor" class="menubtn" data-transition="slide">Favor</a></li>
                <li><a href="#Event" class="menubtn" data-transition="slide">Event</a></li>
            </ul>
        </div>
    </div>

</div>

<script>
$(document).on("pageinit", "#home", function(e){
    var percent = .66;
    var menuStatus = false;
    var margin = $(window).width() * percent;
    var wheight = $(window).height();

function initializeMenu(){
  $("#menu").css({
    'z-index': '-100',
    width: margin,
    height: wheight
  }).page().show();
};

function sendForeground(){
  $("#menu").css({
    'z-index': '100'
  });
};

function sendBackground(){
  $("#menu").css({
    'z-index': '-100'
  });
};
  
  function showMenu(){
    if(menuStatus == false){
      $(".ui-page-active").animate({
        marginLeft: margin
      }, 500, function(){
        sendForeground();
      });
      menuStatus = true;
    } else {
      sendBackground();
      $(".ui-page-active").animate({
        marginLeft: "0px"
      }, 500);
      menuStatus = false;
    }
  };
  
  $(document).on("swiperight", function(e){
    if(!menuStatus){
      showMenu();
    }
  });
  
  $(document).on("swipeleft", function(e){
    if(menuStatus){
      showMenu();
    }
  });

initializeMenu();

$(document).on("click", ".showMenu", function(){
    showMenu();    
});

      $(".menubtn").on("click", function(){
        sendBackground();
        $(".ui-page-active").animate({
          marginLeft: "0px"
        }, 0);
        menuStatus = false;
      });
  });
</script>
</body>